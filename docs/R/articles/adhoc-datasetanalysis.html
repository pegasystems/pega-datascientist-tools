<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>adhoc-datasetanalysis • cdhtools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="adhoc-datasetanalysis">
<meta property="og:description" content="cdhtools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cdhtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/adhoc-datasetanalysis.html">adhoc-datasetanalysis</a>
    </li>
    <li>
      <a href="../articles/adm-datamart.html">adm-datamart</a>
    </li>
    <li>
      <a href="../articles/adm-explained.html">adm-explained</a>
    </li>
    <li>
      <a href="../articles/historical-dataset.html">historical-dataset</a>
    </li>
    <li>
      <a href="../articles/ih-reporting.html">ih-reporting</a>
    </li>
    <li>
      <a href="../articles/snapshots-to-scorecards.html">snapshots-to-scorecards</a>
    </li>
    <li>
      <a href="../articles/thompson-sampling-explained.html">thompson-sampling-explained</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="adhoc-datasetanalysis_files/header-attrs-2.13/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>adhoc-datasetanalysis</h1>
                        <h4 class="author">Pega CDH Tools</h4>
            
            <h4 class="date">2022-04-20</h4>
      
      
      <div class="hidden name"><code>adhoc-datasetanalysis.Rmd</code></div>

    </div>

    
    
<div id="ad-hoc-data-analysis-using-dataset-exports" class="section level1">
<h1 class="hasAnchor">
<a href="#ad-hoc-data-analysis-using-dataset-exports" class="anchor"></a>Ad-Hoc Data Analysis using Dataset Exports</h1>
<p>When testing and debugging DSM projects involving data flows, it often is very handy to inspect datasets. There are a couple of out-of-the-box datasets, like <code>pxInteractionHistory</code> that represents the data stored in IH, or <code>pxDecisionResults</code> that contains the model data and the results of strategies. You can also have custom datasets created perhaps as the results of running dataflows or when generating data with MonteCarlo datasets.</p>
<p>Any of the datasets that supports the <code>browse</code> operation (basically, any that can be read from), can also be exported. The export format used is multi-line JSON, i.e. every record from the dataset is exported as a single line containing the JSON data.</p>
<p>Once you have exported a dataset from Pega, you can easily import it and explore it.</p>
<p>In this example we take a look at a sample of <code>pxInteractionHistory</code> but this really works for any dataset.</p>
<p>In Pega, export the dataset and download it to your local filesystem.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">cdhtools</span><span class="op">)</span>

<span class="co"># include below when developing the library</span>
<span class="co"># sapply(list.files("~/Documents/pega/cdh-datascientist-tools/r/R", "*.R", full.names = T), source)</span>

<span class="va">ihdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readDSExport.html">readDSExport</a></span><span class="op">(</span><span class="st">"Data-pxStrategyResult_pxInteractionHistory"</span>, <span class="st">"~/Downloads"</span><span class="op">)</span> </code></pre></div>
<p>The <code>cdhtools</code> package ships with a small sample of IH data</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">ihsampledata</span>, package<span class="op">=</span><span class="st">"cdhtools"</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ihsampledata</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="3%">
<col width="2%">
<col width="3%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="2%">
<col width="0%">
<col width="1%">
<col width="3%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="0%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="2%">
<col width="3%">
<col width="1%">
<col width="1%">
<col width="0%">
<col width="0%">
<col width="1%">
<col width="2%">
<col width="3%">
<col width="2%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="1%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="left">pySubjectType</th>
<th align="left">pxInteractionID</th>
<th align="left">ControlGroupValidityStart</th>
<th align="left">pyStage</th>
<th align="left">pyJourney</th>
<th align="left">CustomerID</th>
<th align="left">ChannelSubGroup</th>
<th align="left">pyChannel</th>
<th align="left">pyCustomerSubSegment</th>
<th align="left">pyStep</th>
<th align="left">pySubjectID</th>
<th align="left">pyTreatment</th>
<th align="left">pyDirection</th>
<th align="left">pyGroup</th>
<th align="right">pyPropensity</th>
<th align="left">BundleName</th>
<th align="left">pyOutcome</th>
<th align="left">pyReason</th>
<th align="left">pyApplicationVersion</th>
<th align="left">pyComponent</th>
<th align="left">DeviceType</th>
<th align="left">MktType</th>
<th align="left">pyOperator</th>
<th align="right">pxRank</th>
<th align="right">pyPartitionKey</th>
<th align="left">pyIssue</th>
<th align="left">BundleHead</th>
<th align="left">ModelControlGroup</th>
<th align="left">pyDivision</th>
<th align="left">pxFactID</th>
<th align="left">pxOutcomeTime</th>
<th align="left">MktValue</th>
<th align="left">pyBehaviour</th>
<th align="left">WorkID</th>
<th align="left">URI</th>
<th align="left">pyApplication</th>
<th align="left">pyCustomerSegment</th>
<th align="left">pyInteraction</th>
<th align="left">pyName</th>
<th align="left">UserAgent</th>
<th align="left">pyOrganization</th>
<th align="left">pyUnit</th>
<th align="left">pyResponse</th>
<th align="left">pyCategory</th>
<th align="left">ControlGroupValidityEnd</th>
<th align="left">pxDecisionTime</th>
<th align="left">pyLabel</th>
<th align="left">ChannelGroup</th>
<th align="left">pyStrategy</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CDHSample-Data-Customer</td>
<td align="left">-3586780626931683381</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Customer-4118</td>
<td align="left"></td>
<td align="left">SMS</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Customer-4118</td>
<td align="left">Credit_ExternalSMSTreatment</td>
<td align="left">Outbound</td>
<td align="left">CreditCards</td>
<td align="right">0.05</td>
<td align="left">ARM31MCWB</td>
<td align="left">NoResponse</td>
<td align="left"></td>
<td align="left">01.01.01</td>
<td align="left">Rank results</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHSampleAdmin</td>
<td align="right">8</td>
<td align="right">27</td>
<td align="left">Sales</td>
<td align="left">FALSE</td>
<td align="left">Test</td>
<td align="left">CDHOrgDiv</td>
<td align="left">-3586780626931682154</td>
<td align="left">20201013T171442.255 GMT</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHSample</td>
<td align="left"></td>
<td align="left">InitializeModelsSmall</td>
<td align="left">MasterCardWorld</td>
<td align="left"></td>
<td align="left">CDHOrg</td>
<td align="left">CDHOrgUnit</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">20201012T121949.092 GMT</td>
<td align="left">MasterCard World</td>
<td align="left"></td>
<td align="left">InitializeModelsSmall</td>
</tr>
<tr class="even">
<td align="left">CDHSample-Data-Customer</td>
<td align="left">-3586780626931683381</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Customer-4118</td>
<td align="left"></td>
<td align="left">SMS</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Customer-4118</td>
<td align="left"></td>
<td align="left">Outbound</td>
<td align="left">CreditCards</td>
<td align="right">0.05</td>
<td align="left"></td>
<td align="left">Rejected</td>
<td align="left"></td>
<td align="left">01.01.01</td>
<td align="left">Rank results</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHSampleAdmin</td>
<td align="right">12</td>
<td align="right">27</td>
<td align="left">Sales</td>
<td align="left">FALSE</td>
<td align="left">Test</td>
<td align="left">CDHOrgDiv</td>
<td align="left">-3586780626931682150</td>
<td align="left">20201013T171442.255 GMT</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHSample</td>
<td align="left"></td>
<td align="left">InitializeModelsSmall</td>
<td align="left">UPlusFinPersonal</td>
<td align="left"></td>
<td align="left">CDHOrg</td>
<td align="left">CDHOrgUnit</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">20201012T121949.092 GMT</td>
<td align="left">U+ Financial Personal</td>
<td align="left"></td>
<td align="left">InitializeModelsSmall</td>
</tr>
<tr class="odd">
<td align="left">CDHSample-Data-Customer</td>
<td align="left">-3586780626931683381</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Customer-4118</td>
<td align="left"></td>
<td align="left">SMS</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Customer-4118</td>
<td align="left"></td>
<td align="left">Outbound</td>
<td align="left">CreditCards</td>
<td align="right">0.05</td>
<td align="left"></td>
<td align="left">Rejected</td>
<td align="left"></td>
<td align="left">01.01.01</td>
<td align="left">Rank results</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHSampleAdmin</td>
<td align="right">13</td>
<td align="right">27</td>
<td align="left">Sales</td>
<td align="left">FALSE</td>
<td align="left">Test</td>
<td align="left">CDHOrgDiv</td>
<td align="left">-3586780626931682149</td>
<td align="left">20201013T171442.255 GMT</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHSample</td>
<td align="left"></td>
<td align="left">InitializeModelsSmall</td>
<td align="left">UPlusFinGold</td>
<td align="left"></td>
<td align="left">CDHOrg</td>
<td align="left">CDHOrgUnit</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">20201012T121949.092 GMT</td>
<td align="left">U+ Financial Gold</td>
<td align="left"></td>
<td align="left">InitializeModelsSmall</td>
</tr>
<tr class="even">
<td align="left">CDHSample-Data-Customer</td>
<td align="left">-3586780626931683381</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Customer-4118</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Customer-4118</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="right">0.05</td>
<td align="left"></td>
<td align="left">Churned</td>
<td align="left"></td>
<td align="left">01.01.01</td>
<td align="left">Rank results</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHSampleAdmin</td>
<td align="right">14</td>
<td align="right">27</td>
<td align="left"></td>
<td align="left">FALSE</td>
<td align="left"></td>
<td align="left">CDHOrgDiv</td>
<td align="left">-3586780626931682148</td>
<td align="left">20201013T171442.255 GMT</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHSample</td>
<td align="left"></td>
<td align="left">InitializeModelsSmall</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHOrg</td>
<td align="left">CDHOrgUnit</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">20201012T121949.092 GMT</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">InitializeModelsSmall</td>
</tr>
<tr class="odd">
<td align="left">CDHSample-Data-Customer</td>
<td align="left">-3586780626931683342</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Customer-4239</td>
<td align="left"></td>
<td align="left">SMS</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Customer-4239</td>
<td align="left">Credit_ExternalSMSTreatment</td>
<td align="left">Outbound</td>
<td align="left">CreditCards</td>
<td align="right">0.00</td>
<td align="left"></td>
<td align="left">NoResponse</td>
<td align="left"></td>
<td align="left">01.01.01</td>
<td align="left">Rank results</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHSampleAdmin</td>
<td align="right">1</td>
<td align="right">228</td>
<td align="left">Sales</td>
<td align="left">FALSE</td>
<td align="left">Test</td>
<td align="left">CDHOrgDiv</td>
<td align="left">-3586780626931682147</td>
<td align="left">20201013T171442.255 GMT</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CDHSample</td>
<td align="left"></td>
<td align="left">InitializeModelsSmall</td>
<td align="left">UPlusPersonal</td>
<td align="left"></td>
<td align="left">CDHOrg</td>
<td align="left">CDHOrgUnit</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">20201012T143558.997 GMT</td>
<td align="left">U+ Personal Card</td>
<td align="left"></td>
<td align="left">InitializeModelsSmall</td>
</tr>
</tbody>
</table>
<p>Some of the columns in your dataset may represent date or date-time values. Pega will export these as strings in the standard Pega format. For analysis it will be convenient to convert them to proper date/time objects so we can easily report and plot.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"pxOutcomeTime"</span>, <span class="st">"pxDecisionTime"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">ihsampledata</span><span class="op">[[</span><span class="va">f</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">cdhtools</span><span class="fu">::</span><span class="fu"><a href="../reference/fromPRPCDateTime.html">fromPRPCDateTime</a></span><span class="op">(</span><span class="va">ihsampledata</span><span class="op">[[</span><span class="va">f</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">ihsampledata</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"Time"</span>,<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">ihsampledata</span><span class="op">)</span><span class="op">)</span>, with<span class="op">=</span><span class="cn">F</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;  pxOutcomeTime                 pxDecisionTime               </span>
<span class="co">#&gt;  Min.   :2020-10-13 17:14:42   Min.   :2020-10-12 12:19:49  </span>
<span class="co">#&gt;  1st Qu.:2020-10-17 19:10:18   1st Qu.:2020-10-15 22:14:24  </span>
<span class="co">#&gt;  Median :2020-10-19 23:07:45   Median :2020-10-19 18:05:37  </span>
<span class="co">#&gt;  Mean   :2020-10-20 08:20:46   Mean   :2020-10-19 12:20:47  </span>
<span class="co">#&gt;  3rd Qu.:2020-10-23 05:01:59   3rd Qu.:2020-10-22 23:15:22  </span>
<span class="co">#&gt;  Max.   :2020-10-26 12:19:49   Max.   :2020-10-26 11:41:57</span></code></pre></div>
<p>With the data in place, you can now do the analyses you want. For the IH data we can for example plot accept rate over time.</p>
<p>BTW, if you’re not familiar with the <code>data.table</code> syntax below, it would be a good idea to look into this. The internals of <code>cdhtools</code> heavily rely on it also.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ihsampledata</span><span class="op">[</span>, <span class="va">period</span> <span class="op">:=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span><span class="op">(</span><span class="va">pxOutcomeTime</span><span class="op">)</span><span class="op">]</span>
<span class="va">ihsampledata</span><span class="op">[</span>, <span class="va">successRate</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">pyOutcome</span><span class="op">==</span><span class="st">"Accepted"</span><span class="op">)</span><span class="op">/</span><span class="va">.N</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"period"</span>,<span class="st">"pyChannel"</span><span class="op">)</span><span class="op">]</span>
<span class="fu">ggplot</span><span class="op">(</span><span class="va">ihsampledata</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">period</span>, <span class="va">successRate</span>, color<span class="op">=</span><span class="va">pyChannel</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_line</span><span class="op">(</span>size<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># geom_col(position=position_dodge()) +</span>
  <span class="fu">scale_color_discrete_qualitative</span><span class="op">(</span>name<span class="op">=</span><span class="st">"Channel"</span>, guide <span class="op">=</span> <span class="fu">guide_legend</span><span class="op">(</span>reverse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_y_continuous</span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"Success Rate"</span>, labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/label_percent.html">percent</a></span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Success Rate over Time"</span>, x<span class="op">=</span><span class="st">"Date"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.x<span class="op">=</span><span class="fu">element_text</span><span class="op">(</span>angle<span class="op">=</span><span class="fl">45</span>, hjust<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="adhoc-datasetanalysis_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;"></p>
<p>But you can of course also use a different plot style, for example from the <code>tidyverse</code> universe:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="fu">ggplot</span><span class="op">(</span><span class="fu">group_by</span><span class="op">(</span><span class="va">ihsampledata</span>, <span class="va">pyName</span>, <span class="va">pyChannel</span>, <span class="va">pyIssue</span><span class="op">)</span> <span class="op">%&gt;%</span> 
         <span class="fu">rename</span><span class="op">(</span>`Channel`<span class="op">=</span><span class="va">pyChannel</span><span class="op">)</span> <span class="op">%&gt;%</span> 
         <span class="fu">summarise</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
         <span class="fu">mutate</span><span class="op">(</span>pct <span class="op">=</span> <span class="va">count</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">ihsampledata</span><span class="op">)</span><span class="op">)</span>, 
       <span class="fu">aes</span><span class="op">(</span><span class="va">pyName</span>, <span class="va">pct</span>, fill<span class="op">=</span><span class="va">`Channel`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_bar</span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span><span class="op">+</span> <span class="fu">scale_y_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/label_percent.html">percent</a></span><span class="op">)</span><span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proposition Distribution"</span>, x<span class="op">=</span><span class="st">"Proposition"</span>, y<span class="op">=</span><span class="st">"Percentage of Total Offered"</span><span class="op">)</span></code></pre></div>
<p><img src="adhoc-datasetanalysis_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Otto Perdeck.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
